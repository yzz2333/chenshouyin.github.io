
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title> | 霖孙的空间</title>
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <link rel="icon" href="/images/avatar.jpg" />
    <link rel="preconnect" href="https://s4.zstatic.net" />
<script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.loli.net" />
<link rel="preconnect" href="https://gstatic.loli.net" crossorigin />
<link rel="stylesheet" href="https://fonts.loli.net/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap" />
<script> const mixins = {}; </script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>


<script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>



<script src="/js/lib/preview.js"></script>









<link rel="stylesheet" href="/css/main.css" />

<meta name="generator" content="Hexo 7.1.1"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>霖孙的空间</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;霖孙的空间</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div class="article">
    <div>
        <h1></h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/2/29
        </span>
        
        
    </div>
    
    <div class="content" v-pre>
        <p>Vue2 + vue-router + vuex<br>在写本文时 Vite 没有提供 Vue2 的创建方式。<br>相信有些开发者还没开始学 Vue3，但又想尝尝 Vite。那可以参考本文的进食方式。<br>如果心急的话，“0、简介” 可以跳过。</p>
<h2 id="0、简介"><a href="#0、简介" class="headerlink" title="0、简介"></a>0、简介</h2><p>在写本文时，Vite 默认不提供 Vue2 项目的创建方式。<br>使用 Vite 创建出来的 Vue 项目，暂时都是 Vue3 的。<br>Vite 是构建工具的高阶封装。它的内部其实是 Rollup 。<br>Vite 是尤雨溪随着 Vue3 正式版 一起发布的一个工具。<br>最开始 Vite 是为 Vue3 服务的一个工具，但随着 Vite 2.0 发布之后，Vite 就是一个独立的构建工具了。<br>Vite 除了能搭建 Vue3 项目之外，还能搭建 react 等项目。<br>Vite 能搭建的项目包括：<br>vanilla<br>vanilla-ts<br>vue<br>vue-ts<br>react<br>react-ts<br>preact<br>preact-ts<br>lit-element<br>lit-element-ts<br>svelte<br>svelte-ts<br>更详细的介绍请看<br>Vite官网（中文版）<br>Vite GitHub地址</p>
<h2 id="1、初始化-Vue2-项目"><a href="#1、初始化-Vue2-项目" class="headerlink" title="1、初始化 Vue2 项目"></a>1、初始化 Vue2 项目</h2><p>在写本文时，Vite 默认没提供 Vue2 项目创建的选项。<br>我们可以使用 Vite 创建一个原生项目，然后再安装 Vue2 的生态进行开发。</p>
<h3 id="1-1、初始化项目"><a href="#1-1、初始化项目" class="headerlink" title="1.1、初始化项目"></a>1.1、初始化项目</h3><p>首先进入项目存放的地方，然后运行以下命令创建项目。</p>
<p>npm init vite@latest</p>
<p>如果是首次使用 Vite 的话，会询问你是否继续，这里回复 y 即可。</p>
<p>Ok to proceed?(y)</p>
<p>之后只需输入项目名称即可，我这里新建的项目名为：vite-vue2。</p>
<p>Project name: vite-vue2</p>
<p>完成以上步骤后，再选择以下要新建的是什么项目即可。<br>这里选择 vanilla 即可，随后会追问选择 原生 的还是 ts 的，根据自己需求选择即可。<br>我这里会选择 原生 进行开发。</p>
<p>项目创建成功后，会出现 3 条提示命令。</p>
<p> 【1】进入项目<br>cd vite-vue2</p>
<p> 【2】初始化项目<br>npm install</p>
<p> 【3】运行项目<br>npm run dev</p>
<p>注意： 第二步使用 npm install 初始化可能会出现一些小问题，这里建议使用 yarn 初始化项目。<br>项目目录如下所示<br><img src="https://www.yzzone.com/uploads/editor/editorFile-1818fbc58f6.png" alt="image.png"></p>
<h3 id="1-2、安装-vite-对-vue2-支持的插件"><a href="#1-2、安装-vite-对-vue2-支持的插件" class="headerlink" title="1.2、安装 vite 对 vue2 支持的插件"></a>1.2、安装 vite 对 vue2 支持的插件</h3><p>要在 vite 里运行 vue2 项目，需要安装一个 vite 的插件：vite-plugin-vue2</p>
<p>npm install vite-plugin-vue2 –dev</p>
<p>如果 npm 安装不了，可以用 cnpm 或者 yarn 。<br>要使用 vite 插件，需要在项目的根目录创建 vite.config.js 文件。<br>在 vite.config.js 里输入以下代码。</p>
<p>import { createVuePlugin } from ‘vite-plugin-vue2’</p>
<p>export default {<br>  plugins: [createVuePlugin()]<br>}</p>
<p>引入 vite-plugin-vue2 插件，并用 Vite 提供的插件注册方法来注册。<br>需要注意，createVuePlugin() 是跟着括号的，是要执行的！</p>
<p>配置 使用缩写@<br>需要在 vite.config.js 中添加如下配置</p>
<p>export default {<br>  plugins: [createVuePlugin()],<br>  resolve: {<br>    alias: [<br>      { find: ‘@’,  replacement: ‘&#x2F;src’},<br>    ]<br>  },<br>}<br>代码中即可使用如 import logger from “@&#x2F;utils&#x2F;logger.js”</p>
<h3 id="1-3、安装-vue-依赖"><a href="#1-3、安装-vue-依赖" class="headerlink" title="1.3、安装 vue 依赖"></a>1.3、安装 vue 依赖</h3><p>使用以下命令安装 vue2。</p>
<p>npm install vue -S<br>npm install vue-template-compiler</p>
<p>在写本文时，通过 npm install vue 安装 vue ，还是会装回 2.x 版本的。<br>如果后面 vue3 全面更新了，需要安装 vue2 的话，需要在以上命令加上版本号。</p>
<h3 id="1-4、修改项目文件依赖关系"><a href="#1-4、修改项目文件依赖关系" class="headerlink" title="1.4、修改项目文件依赖关系"></a>1.4、修改项目文件依赖关系</h3><h4 id="1-4-1、创建-src-目录"><a href="#1-4-1、创建-src-目录" class="headerlink" title="1.4.1、创建 src 目录"></a>1.4.1、创建 src 目录</h4><p>在项目根目录下创建 src 目录。<br>然后把 main.js 移到 src 目录里。</p>
<h4 id="1-4-2、修改-index-html"><a href="#1-4-2、修改-index-html" class="headerlink" title="1.4.2、修改 index.html"></a>1.4.2、修改 index.html</h4><p>项目启动后，入口文件是 index.html ，而 index.html 原本引入了 main.js ，所以也要修改一下 index.html 文件的指向。</p>
<p>&lt;script type&#x3D;”module” src&#x3D;”&#x2F;src&#x2F;main.js”&gt;&lt;&#x2F;script&gt;</p>
<p>1.4.3、创建 App.vue 文件<br>创建 App.vue 文件，并输入以下代码</p>
<p>&lt;template&gt;<br>  <div>Hello Vite Vue2</div><br>&lt;&#x2F;template&gt;</p>
<h4 id="1-4-4、修改-src-main-js"><a href="#1-4-4、修改-src-main-js" class="headerlink" title="1.4.4、修改 src&#x2F;main.js"></a>1.4.4、修改 src&#x2F;main.js</h4><p>这一步的代码就有点像使用 vue-cli 创建的项目里的 main.js 的操作了。</p>
<p>import Vue from ‘vue’<br>import App from ‘.&#x2F;App.vue’</p>
<p>new Vue({<br>  render: h &#x3D;&gt; h(App)<br>}).$mount(‘#app’)</p>
<h3 id="1-5、运行项目"><a href="#1-5、运行项目" class="headerlink" title="1.5、运行项目"></a>1.5、运行项目</h3><p>经过之前几步的配置，运行以下命令就可以把项目跑起来了。</p>
<p>npm run dev</p>
<h3 id="1-6、打包"><a href="#1-6、打包" class="headerlink" title="1.6、打包"></a>1.6、打包</h3><p>运行一下命令可以打包项目。</p>
<p>npm run build</p>
<p>打包出来的项目目录名是：dist</p>
<h2 id="2、安装-vue-router"><a href="#2、安装-vue-router" class="headerlink" title="2、安装 vue-router"></a>2、安装 vue-router</h2><h3 id="2-1、安装"><a href="#2-1、安装" class="headerlink" title="2.1、安装"></a>2.1、安装</h3><p>npm install vue-router</p>
<p>在写本文时，使用以上命令安装的 vue-router 是支持 Vue2 项目的。<br>如果以后该命令安装的 vue-router 是支持 Vue3 的话，需要自行加一个版本号来约束。</p>
<h3 id="2-2-新建路由目录"><a href="#2-2-新建路由目录" class="headerlink" title="2.2 新建路由目录"></a>2.2 新建路由目录</h3><h4 id="2-2-1、创建路由表"><a href="#2-2-1、创建路由表" class="headerlink" title="2.2.1、创建路由表"></a>2.2.1、创建路由表</h4><p>在 src 目录下创建 router 目录，并在 router 目录下创建 index.js 文件。<br>在 src&#x2F;router&#x2F;index.js 输入以下代码</p>
<h3 id="2-2-新建路由目录-1"><a href="#2-2-新建路由目录-1" class="headerlink" title="2.2 新建路由目录"></a>2.2 新建路由目录</h3><h3 id="2-2-1、创建路由表-1"><a href="#2-2-1、创建路由表-1" class="headerlink" title="#2.2.1、创建路由表"></a>#2.2.1、创建路由表</h3><p>在 src 目录下创建 router 目录，并在 router 目录下创建 index.js 文件。<br>在 src&#x2F;router&#x2F;index.js 输入以下代码</p>
<p>import Vue from ‘vue’<br>import VueRouter from ‘vue-router’<br>import Home from ‘..&#x2F;views&#x2F;Home.vue’ &#x2F;&#x2F; 引入 Home页面组件</p>
<p>&#x2F;&#x2F; 注册路由插件<br>Vue.use(VueRouter)</p>
<p>&#x2F;&#x2F;<br>const routes &#x3D; [<br>  {<br>    path: ‘&#x2F;‘,<br>    name: ‘Home’,<br>    component: Home<br>  },<br>  {<br>    path: ‘&#x2F;about’,<br>    name: ‘About’,<br>    component: () &#x3D;&gt; import(‘..&#x2F;views&#x2F;About.vue’)<br>  }<br>]</p>
<p>const router &#x3D; new VueRouter({<br>  routes<br>})</p>
<p>export default router</p>
<h4 id="2-2-2、创建路由指向的页面组件"><a href="#2-2-2、创建路由指向的页面组件" class="headerlink" title="2.2.2、创建路由指向的页面组件"></a>2.2.2、创建路由指向的页面组件</h4><p>在 src 目录下创建 views 目录，用来存放页面组件。<br>在 src&#x2F;views 目录下创建2个页面：Home.vue 和 About.vue<br>Home.vue 内容</p>
<p>&lt;template&gt;<br>  <div><br>    Home<br>  </div><br>&lt;&#x2F;template&gt;</p>
<p>About.vue 内容</p>
<p>&lt;template&gt;<br>  <div><br>    About<br>  </div><br>&lt;&#x2F;template&gt;</p>
<h3 id="2-3-全局注册"><a href="#2-3-全局注册" class="headerlink" title="2.3 全局注册"></a>2.3 全局注册</h3><h4 id="2-3-1、在-main-js-里注册"><a href="#2-3-1、在-main-js-里注册" class="headerlink" title="2.3.1、在 main.js 里注册"></a>2.3.1、在 main.js 里注册</h4><p>import Vue from ‘vue’<br>import App from ‘.&#x2F;App.vue’<br>import router from ‘.&#x2F;router&#x2F;index.js’</p>
<p>new Vue({<br>  router,<br>  render: h &#x3D;&gt; h(App)<br>}).$mount(‘#app’)</p>
<p>引入 router ，并且在 new Vue 时注册一下。</p>
<h4 id="2-3-2-创建路由跳转标签-并-展示"><a href="#2-3-2-创建路由跳转标签-并-展示" class="headerlink" title="2.3.2 创建路由跳转标签 并 展示"></a>2.3.2 创建路由跳转标签 并 展示</h4><p>修改 App.vue 文件</p>
<p>&lt;template&gt;<br>  <div><br>    <nav><br>      &lt;router-link to&#x3D;”&#x2F;“&gt;Home&lt;&#x2F;router-link&gt; |<br>      &lt;router-link to&#x3D;”&#x2F;about”&gt;About&lt;&#x2F;router-link&gt;<br>    </nav><br>    &lt;router-view &#x2F;&gt;<br>  </div><br>&lt;&#x2F;template&gt;</p>
<p>使用 &lt;router-link&gt; 标签定义跳转地址。<br>使用 &lt;router-view&gt; 标签展示内容。<br>图片: <a target="_blank" rel="noopener" href="https://uploader.shimo.im/f/qujHVe0jD5GHqP3N.png!thumbnail?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJhdWQiOiJhY2Nlc3NfcmVzb3VyY2UiLCJleHAiOjE2NTU5NzM3MDcsImZpbGVHVUlEIjoiVk1BUFY4cE93R0NPZ2pxZyIsImlhdCI6MTY1NTk3MzQwNywidXNlcklkIjo0NjQzODU4M30.oPbnE0I0iXWvj0CaIBbr-bgA4MMvfVuPoKj3sSfhqMU">https://uploader.shimo.im/f/qujHVe0jD5GHqP3N.png!thumbnail?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJhdWQiOiJhY2Nlc3NfcmVzb3VyY2UiLCJleHAiOjE2NTU5NzM3MDcsImZpbGVHVUlEIjoiVk1BUFY4cE93R0NPZ2pxZyIsImlhdCI6MTY1NTk3MzQwNywidXNlcklkIjo0NjQzODU4M30.oPbnE0I0iXWvj0CaIBbr-bgA4MMvfVuPoKj3sSfhqMU</a></p>
<p>showRouter.gif</p>
<h2 id="3、安装-vuex"><a href="#3、安装-vuex" class="headerlink" title="3、安装 vuex"></a>3、安装 vuex</h2><h3 id="3-1-安装"><a href="#3-1-安装" class="headerlink" title="3.1 安装"></a>3.1 安装</h3><p>npm install vuex –save</p>
<p>在写本文时，使用以上命令安装的 vuex 是支持 Vue2 项目的。<br>如果以后该命令安装的 vuex 是支持 Vue3 的话，需要自行加一个版本号来约束。</p>
<h3 id="3-2-新建vuex目录"><a href="#3-2-新建vuex目录" class="headerlink" title="3.2 新建vuex目录"></a>3.2 新建vuex目录</h3><p>在 src 目录下创建 store 目录，并在 store 目录下创建 index.js。<br>在 index.js 文件输入以下代码</p>
<p>import Vue from ‘vue’<br>import Vuex from ‘vuex’</p>
<p>Vue.use(Vuex)</p>
<p>export default new Vuex.Store({<br>  state: {<br>    count: 0<br>  },<br>  getters: {<br>    count(state) {<br>      return state.count<br>    }<br>  },<br>  mutations: {<br>    addCount(state, num) {<br>      state.count +&#x3D; num<br>    }<br>  },<br>  actions: {}<br>})</p>
<p>以上代码，在 state 里创建一个变量 count 用作计数器。<br>在 getters 里提供一个方法获取 count。<br>在 mutations 里提供一个方法修改 count。</p>
<h3 id="3-3-全局注册"><a href="#3-3-全局注册" class="headerlink" title="3.3 全局注册"></a>3.3 全局注册</h3><h4 id="3-3-1-在-main-js-里注册"><a href="#3-3-1-在-main-js-里注册" class="headerlink" title="3.3.1 在 main.js 里注册"></a>3.3.1 在 main.js 里注册</h4><p>import Vue from ‘vue’<br>import App from ‘.&#x2F;App.vue’<br>import router from ‘.&#x2F;router&#x2F;index.js’<br>import store from ‘.&#x2F;store’</p>
<p>new Vue({<br>  router,<br>  store,<br>  render: h &#x3D;&gt; h(App)<br>}).$mount(‘#app’)</p>
<p>引入 store 并在 new Vue 时注册。</p>
<h4 id="3-3-2-在-Home-vue-里使用"><a href="#3-3-2-在-Home-vue-里使用" class="headerlink" title="3.3.2 在 Home.vue 里使用"></a>3.3.2 在 Home.vue 里使用</h4><p>&lt;template&gt;<br>  <div><br>    <h1>Home</h1><br>    <div>count: </div><br>    &lt;button @click&#x3D;”addCount”&gt;+1&lt;&#x2F;button&gt;<br>  </div><br>&lt;&#x2F;template&gt;</p>
<p>&lt;script&gt;<br>export default {<br>  computed: {<br>    count() {<br>      return this.$store.getters.count;<br>    },<br>  },<br>  methods: {<br>    addCount() {<br>      this.$store.commit(“addCount”, 1);<br>    },<br>  },<br>};<br>&lt;&#x2F;script&gt;</p>
<h2 id="4、参考"><a href="#4、参考" class="headerlink" title="4、参考"></a>4、参考</h2><p>Vite 官方文档<br>Vite 支持 Vue2 的插件：vite-plugin-vue2 文档</p>

    </div>
    
    
    
    
    
    
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2024 霖孙的空间
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;John Doe
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
    




    
</body>
</html>
